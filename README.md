# data-storages-app
Project for Data Storages Course

# TODO
Create some queries

## Install
Create environment
```
python -m venv .venv
source .venv/bin/activate
```

Install dependencies
```
pip install -r requirements.txt
```

Configure the Enviroment variables. For development stage, you can use an .env file:

```
cp .env.example .env
```

then fill each variable with its true value ;)

## Models
Create a model class in some file within the folder models like this:

```python
from manager.models_type import *

@table_keys('PublisherId')
class Publisher:
    PublisherId = DBInt(autogenerated=True)
    Name = DBVarchar()
```

### Setup Models

The folowing command will create and populate all tables. If they are already created, they will be delet it first.

```shell
python main.py --setup
```

### Query by command line
Use -q and -d parameters like this

```shell
python main.py -q get_purchases_by_user -d "{\"UserId\":2}"
```

-q is the query name
-d the data in json format

for more information use --help

### Aviable queries
- -q get_purchases_count
- -q get_purchases_by_user -d "{\"UserId\" : 1}"
- -q get_books_by_author -d "{\"FirstName\" : \"John\", \"LastName\" : \"Doe\"}"
- -q create_user -d "{\"Email\" : \"test@email.com\", \"Password\" : \"password\", \"Role\" : \"admin\"}"
- -q create_book -d "{\"PublisherId\" : 1, \"AuthorId\" : 1, \"Title\" : \"Title\", \"CoverImage\" : \"Path/to/image\", \"PublishDate\" : \"2023-02-01\", \"Price\" : 123}"
- -q create_purchase -d "{\"UserId\" : 1, \"BookId\" : 1}"
